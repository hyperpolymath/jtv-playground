= JTV Workbench
:toc: macro
:icons: font

// SPDX-License-Identifier: AGPL-3.0-or-later

*Controlled experimentation workbench for Julia-the-Viper language development*

image:https://img.shields.io/badge/Language-JTV-red[JTV]
image:https://img.shields.io/badge/License-AGPL--3.0-blue[License]
image:https://img.shields.io/badge/Status-f0-green[f0]

toc::[]

== Overview

This is the **only area that may grow** in the jtv-playground repository (per ANCHOR scope policy).

Julia-the-Viper (JTV) is a systems programming language designed for Harvard architecture processors where code and data live in separate memory spaces.

== Directory Structure

----
jtv/
├── parser/      # Lexer and parser experiments
├── samples/     # JTV code samples
├── spec/        # Language specification drafts
├── tests/       # Test corpus and conformance tests
│   └── corpus/
│       ├── valid/     # Valid JTV programs (>=3)
│       └── invalid/   # Invalid programs (>=2)
├── repl/        # REPL prototype
└── tools/       # Development tools
----

== Golden Path

All operations are routed through `just`:

[source,bash]
----
just --list    # Show available recipes
just test      # Run test corpus (offline)
just demo      # Run JTV demonstration (offline)
----

== Key Features

* **Harvard Architecture Native**: Separate code/data address spaces
* **Flash-Optimized**: Efficient code storage in flash memory
* **RAM Conservation**: Minimize RAM usage for data
* **Embedded Focus**: AVR, PIC, ARM Cortex-M
* **Zero Runtime**: No hidden allocations

== Memory Space Annotations

[source,jtv]
----
-- Code space (flash/ROM)
const LOOKUP_TABLE: [u8; 256] @code = [...]

-- Data space (RAM)
let mut buffer: [u8; 64] @data

-- I/O space (registers)
const PORT_B: *mut u8 @io = 0x25
----

== Resource Constraints

[source,jtv]
----
-- Compile-time stack analysis
#[max_stack(64)]
fn process() -> ():
    -- Compiler verifies stack usage

-- Static allocation only
#[no_heap]
module Firmware:
    -- All memory statically allocated
----

== Test Corpus

The test corpus in `tests/corpus/` contains:

* **Valid samples** (>=3): Programs that should parse correctly
* **Invalid samples** (>=2): Programs with expected errors

Run the validator:

[source,bash]
----
just test
----

== Scope Policy

Per the ANCHOR directive:

* **Allowed**: JTV language experiments, parser/AST work, REPL, conformance tests
* **Forbidden**: Non-JTV experiments, new frameworks, network dependencies

== License

SPDX-License-Identifier: AGPL-3.0-or-later
