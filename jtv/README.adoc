= Julia-the-Viper Playground
:toc: macro
:icons: font

// SPDX-License-Identifier: AGPL-3.0-or-later

*Playground for Julia-the-Viper - Harvard Architecture Systems Programming*

image:https://img.shields.io/badge/Language-JTV-red[JTV]
image:https://img.shields.io/badge/License-AGPL--3.0-blue[License]

toc::[]

== Overview

Julia-the-Viper (JTV) is a systems programming language designed for Harvard architecture processors where code and data live in separate memory spaces.

=== Key Features

* **Harvard Architecture Native**: Separate code/data address spaces
* **Flash-Optimized**: Efficient code storage in flash memory
* **RAM Conservation**: Minimize RAM usage for data
* **Embedded Focus**: AVR, PIC, ARM Cortex-M
* **Zero Runtime**: No hidden allocations

== Language Design

=== Memory Spaces

[source,jtv]
----
-- Code space (flash/ROM)
const LOOKUP_TABLE: [u8; 256] @code = [...]

-- Data space (RAM)
let mut buffer: [u8; 64] @data

-- Access code space explicitly
fn read_table(idx: u8) -> u8:
    pgm_read(LOOKUP_TABLE[idx])
----

=== Embedded Primitives

[source,jtv]
----
-- Direct register access
fn setup_uart() -> ():
    UBRR0H = 0x00
    UBRR0L = 103  -- 9600 baud @ 16MHz
    UCSR0B = (1 << TXEN0) | (1 << RXEN0)

-- Interrupt handlers
#[interrupt(TIMER0_OVF)]
fn timer_overflow() -> ():
    tick_count += 1
----

=== Resource Constraints

[source,jtv]
----
-- Compile-time stack analysis
#[max_stack(64)]
fn process() -> ():
    -- Compiler verifies stack usage

-- Static allocation only
#[no_heap]
module Firmware:
    -- All memory statically allocated
----

== Getting Started

=== Prerequisites

* AVR-GCC or ARM toolchain
* JTV compiler

=== Installation

[source,bash]
----
guix install julia-the-viper
----

=== Hello World (AVR)

[source,jtv]
----
module Main

import AVR.UART (init, print)

fn main() -> !:
    init(9600)
    loop:
        print("Hello from JTV!")
        delay_ms(1000)
----

== Examples

* `avr-blink/` - LED blink for AVR
* `arm-cortex/` - ARM Cortex-M examples
* `bootloader/` - Custom bootloader

== License

SPDX-License-Identifier: AGPL-3.0-or-later
